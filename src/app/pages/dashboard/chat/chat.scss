$primary: #a78bfa;
$primary-dark: #8b5cf6;
$bg-gray: #f9fafb;
$border-color: #f3f4f6;
$text-dark: #1f2937;
$text-light: #9ca3af;

:host { display: block; height: 85vh; overflow: hidden; font-family: 'Inter',-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif; padding: 0; }

.chat-container { display: flex; height: 100%; width: 100%; background: #fff; overflow: hidden; }
.chat-sidebar { width: 320px; display: flex; flex-direction: column; background: #fff; border-right: 1px solid $border-color; height: 100%; flex-shrink: 0; }

.chat-header { padding: 20px; display: flex; justify-content: space-between; align-items: center; flex: 0 0 auto; }
.chat-header h2 { font-size: 24px; font-weight: 700; margin: 0; color: $text-dark; }

.search-container { padding: 0 20px 10px; flex: 0 0 auto; } .chat-search { position: relative; }
.chat-search .search-input { width: 100%; padding: 10px 10px 10px 35px; background: #f3f4f6; border: 0; border-radius: 20px; font-size: 14px; outline: 0; box-sizing: border-box; } .chat-search .search-input::placeholder { color: #9ca3af; } .chat-search .search-icon { position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: #9ca3af; }

.contactos-list { flex: 1; overflow-y: auto; padding: 10px 0; }
.contacto-item { display: flex; padding: 12px 20px; cursor: pointer; transition: background 0.2s; align-items: center; gap: 12px; }
.contacto-item:hover { background: #f9fafb; }
.contacto-item.active { background: #f3f4f6; }
.avatar-wrapper { position: relative; flex-shrink: 0; }
.avatar-wrapper .avatar { width: 48px; height: 48px; border-radius: 50%; object-fit: cover; } .status-dot { position: absolute; bottom: 2px; right: 2px; width: 10px; height: 10px; background: #10b981; border: 2px solid #fff; border-radius: 50%; }
.contacto-info { flex: 1; min-width: 0; }
.top-row { display: flex; justify-content: space-between; margin-bottom: 4px; }
.top-row .contacto-nombre { font-weight: 600; font-size: 14px; color: $text-dark; }
.top-row .timestamp { font-size: 11px; color: $text-light; }
.bottom-row { display: flex; justify-content: space-between; align-items: center; }
.bottom-row .contacto-mensaje { font-size: 13px; color: $text-light; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.bottom-row .badge { background: #3b82f6; color: #fff; font-size: 10px; height: 18px; width: 18px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-left: 6px; }
.chat-main { flex: 1; display: flex; flex-direction: column; background: #fff; height: 100%; overflow: hidden; position: relative; min-width: 0; }
.chat-conv-header { flex: 0 0 auto; padding: 15px 24px; border-bottom: 1px solid $border-color; display: flex; justify-content: space-between; align-items: center; background: #fff; z-index: 10; }
.conv-info { display: flex; align-items: center; gap: 12px; }
.conv-info .avatar-header { width: 40px; height: 40px; border-radius: 50%; object-fit: cover; }
.conv-info h3 { margin: 0; font-size: 16px; font-weight: 600; }
.conv-info .subtext { font-size: 12px; color: $text-light; } .action-icon { background: 0; border: 0; cursor: pointer; color: $text-dark; padding: 8px; }

.chat-messages { flex: 1 1 0; overflow-y: auto; padding: 24px; display: flex; flex-direction: column; gap: 12px; scroll-behavior: smooth; }
.mensaje-group { display: flex; align-items: flex-end; gap: 8px; flex-shrink: 0; }
.mensaje-bubble { padding: 14px 20px; font-size: 14px; line-height: 1.5; position: relative; max-width: 70%; border-radius: 24px; box-shadow: 0 1px 2px rgba(0,0,0,0.05); word-wrap: break-word; }
.mensaje-group:not(.enviado) { justify-content: flex-start; }
.mensaje-group:not(.enviado) .mensaje-bubble { background-color: #a5a6f6; color: #fff; border-bottom-left-radius: 4px; }
.mensaje-group.enviado { justify-content: flex-end; }
.mensaje-group.enviado .mensaje-bubble { background-color: #f3f4f6; color: #1f2937; border-bottom-right-radius: 4px; }

.chat-input-area { flex: 0 0 auto; padding: 16px 24px; border-top: 1px solid $border-color; display: flex; align-items: center; gap: 12px; background: #fff; z-index: 10; position: relative; }
.chat-input-area .mensaje-input { flex: 1; border: 0; outline: 0; font-size: 14px; color: $text-dark; }
.chat-input-area .mensaje-input::placeholder { color: #d1d5db; }
.input-tools { display: flex; gap: 8px; position: relative; }
.input-tools .tool-btn { background: 0; border: 0; cursor: pointer; color: #9ca3af; }
.input-tools .tool-btn:hover { color: $primary-dark; }
.send-btn { background: 0; border: 0; cursor: pointer; color: $text-dark; display: flex; align-items: center; }
.chat-sidebar-right { width: 320px; padding: 24px; overflow-y: auto; background: #fff; border-left: 1px solid $border-color; height: 100%; flex-shrink: 0; }
.status-dropdown select { width: 100%; padding: 8px 12px; border: 1px solid #e5e7eb; border-radius: 6px; color: $text-dark; margin-bottom: 24px; background: #fff; }
.section-block { margin-bottom: 30px; }
.section-block h4 { font-size: 14px; font-weight: 600; margin: 0 0 16px 0; color: $text-dark; }
.info-row { display: flex; justify-content: space-between; margin-bottom: 12px; font-size: 13px; }
.info-row .label { color: $text-light; }
.info-row .val { color: $text-dark; font-weight: 500; } .calendar-header { display: flex; justify-content: space-between; font-size: 13px; color: $text-light; margin-bottom: 12px; }
.calendar-header .cal-nav { letter-spacing: 8px; cursor: pointer; }
.calendar-grid { display: grid; grid-template-columns: repeat(6,1fr); gap: 6px; text-align: center; font-size: 11px; color: $text-dark; }
.calendar-grid .day-name { color: $text-light; font-size: 10px; margin-bottom: 4px; }
.calendar-grid .day { padding: 4px; cursor: pointer; border-radius: 4px; }
.calendar-grid .day:hover { background: #f3f4f6; }
.calendario-grid .day.faded { color: #e5e7eb; } .slots-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 16px; }
.slot-btn { background: #f9fafb; border: 1px solid #f3f4f6; border-radius: 12px; padding: 10px; display: flex; flex-direction: column; align-items: center; cursor: pointer; transition: all 0.2s; }
.slot-btn span { font-size: 10px; color: $text-light; margin-bottom: 2px; }
.slot-btn strong { font-size: 13px; color: $text-dark; }
.slot-btn:hover { border-color: $primary-dark; background: #f5f3ff; }
.btn-primary-block { width: 100%; background: $primary-dark; color: #fff; border: 0; padding: 12px; border-radius: 8px; font-weight: 500; cursor: pointer; }
.btn-primary-block:hover { background: #7c3aed; }
.empty-state { display: flex; flex-direction: column; align-items: center; justify-content: center; flex: 1 1 0; min-height: 0; padding: 0 24px; color: $text-dark; text-align: center; }
.empty-illustration { margin-bottom: 18px; display: flex; align-items: center; justify-content: center; } .empty-illustration .empty-svg { width: 160px; height: auto; display: block; }
.empty-state h3 { margin: 0 0 8px 0; font-size: 20px; color: $text-dark; }
.empty-state .muted { color: $text-light; max-width: 480px; margin: 0 auto; } .btn-empty { margin-top: 16px; background: $primary-dark; color: #fff; border: 0; padding: 10px 16px; border-radius: 8px; cursor: pointer; }
.btn-empty:hover { filter: brightness(0.95); }

@media (max-width:800px) { .empty-illustration .empty-svg { width: 120px; } .empty-state h3 { font-size: 18px; } .empty-state .muted { max-width: 320px; } }
.file-picker-popover { position: absolute; top: -56px; left: 0; z-index: 40; pointer-events: auto; }
.file-picker { background: #fff; border-radius: 10px; padding: 8px; border: 1px solid rgba(15,23,42,0.06); }
.file-picker .picker-grid { display: flex; gap: 8px; align-items: center; }
.picker-btn { background: transparent; border: 0; cursor: pointer; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 4px; width: 44px; height: 44px; border-radius: 8px; transition: background 0.12s,transform 0.08s; }
.picker-btn:hover { background: #f3f4f6; transform: translateY(-2px); }
.picker-btn .emoji { font-size: 12px; line-height: 1; } .picker-btn small { display: block; margin-top: 4px; font-size: 10px; color: $text-light; }
.picker-btn.compact { width: 44px; height: 44px; }
.quick-responses-container { padding: 16px 24px; background: #fff; border-top: 1px solid $border-color; display: flex; flex-direction: column; gap: 12px; }
.quick-responses-container .qr-title { font-size: 15px; font-weight: 700; color: #6b7280; margin: 0; }
.quick-responses-container .qr-list { display: flex; flex-direction: column; gap: 4px; }
.quick-responses-container .qr-item { background: transparent; border: 0; padding: 6px 0; text-align: left; display: flex; gap: 10px; cursor: pointer; transition: background 0.2s; font-family: inherit; }
.quick-responses-container .qr-item:hover { background: #f9fafb; }
.quick-responses-container .qr-command { font-weight: 700; color: #4b5563; min-width: 80px; } .quick-responses-container .qr-text { color: #9ca3af; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.quick-responses-container .qr-add-btn { background: transparent; border: 0; padding: 8px 0; text-align: left; font-weight: 700; color: #6b7280; cursor: pointer; font-size: 14px; margin-top: 4px; }
.quick-responses-container .qr-add-btn:hover { text-decoration: underline; }